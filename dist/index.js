function t(){t=function(t,r){return new i(t,void 0,r)};var r=RegExp.prototype,n=new WeakMap;function i(t,r,e){var s=new RegExp(t,r);return n.set(s,e||n.get(t)),o(s,i.prototype)}function s(t,r){var e=n.get(r);return Object.keys(e).reduce(function(r,o){return r[o]=t[e[o]],r},Object.create(null))}return e(i,RegExp),i.prototype.exec=function(t){var e=r.exec.call(this,t);return e&&(e.groups=s(e,this)),e},i.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var o=n.get(this);return r[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,function(t,r){return"$"+o[r]}))}if("function"==typeof e){var i=this;return r[Symbol.replace].call(this,t,function(){var t=arguments;return"object"!=typeof t[t.length-1]&&(t=[].slice.call(t)).push(s(t,i)),e.apply(this,t)})}return r[Symbol.replace].call(this,t,e)},t.apply(this,arguments)}function r(){return r=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r.apply(this,arguments)}function e(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&o(t,r)}function o(t,r){return o=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},o(t,r)}function n(t,r){var e,o=(null!=(e=t.match(r))?e:{}).groups;return null!=o?o:{}}var i=function(t,r){try{for(var e=new URLSearchParams,o=0,n=Object.entries(r);o<n.length;o++){var i=n[o];e.set(i[0],encodeURIComponent(i[1]).replace(/%20/g,"+"))}return Promise.resolve(function(r,o){try{var n=Promise.resolve(fetch(s+"/"+t+"?"+e.toString())).then(function(t){if(t.ok)return Promise.resolve(t.json());throw new Error(t.statusText)})}catch(t){return o(t)}return n&&n.then?n.then(void 0,o):n}(0,function(t){return Promise.reject(t)}))}catch(t){return Promise.reject(t)}},s="https://itunes.apple.com",c=/*#__PURE__*/t(/^https?:\/\/((?:apps|books|music|podcasts|))\.apple\.com\/([a-z]+)\/([\x2Da-z]+)/,{media:1,country:2,entity:3}),u=/*#__PURE__*/t(/^https?:\/\/apps\.apple\.com\/(?:(?!\/)[\s\S])*\/app\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),p=/*#__PURE__*/t(/^https?:\/\/music\.apple\.com\/(?:(?!\/)[\s\S])*\/artist\/(?:(?!\/)[\s\S])*\/([0-9]+)/,{id:1}),a=/*#__PURE__*/t(/^https?:\/\/books\.apple\.com\/(?:(?!\/)[\s\S])*\/audiobook\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),l=/*#__PURE__*/t(/^https?:\/\/books\.apple\.com\/(?:(?!\/)[\s\S])*\/author\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),f=/*#__PURE__*/t(/^https?:\/\/books\.apple\.com\/(?:(?!\/)[\s\S])*\/book\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),h=/*#__PURE__*/t(/^https?:\/\/music\.apple\.com\/(?:(?!\/)[\s\S])*\/music\x2Dvideo\/(?:(?!\/)[\s\S])*\/([0-9]+)/,{id:1}),m=/*#__PURE__*/t(/^https?:\/\/podcasts\.apple\.com\/(?:(?!\/)[\s\S])*\/podcast\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),d=/*#__PURE__*/t(/^https?:\/\/music\.apple\.com\/(?:(?!\/)[\s\S])*\/album\/(?:(?!\/)[\s\S])*\/([0-9]+)(?:\?.*i=([0-9]+))?/,{id:1,trackId:2}),y={country:"us"};exports.lookup=function(t,e,o){void 0===o&&(o={});try{var s,v=r({},y,o),b="url"===t?function(t){var r=n(t,c),e=r.country,o=r.entity,i=r.media;function s(t){return t?{country:e,id:Number(t)}:{}}function y(r){return s(n(t,r).id)}if("apps"===i)return y(u);if("books"===i&&"audiobook"===o)return y(a);if("books"===i&&"author"===o)return y(l);if("books"===i&&"book"===o)return y(f);if("music"===i&&"artist"===o)return y(p);if("music"===i&&"music-video"===o)return y(h);if("podcasts"===i&&"podcast"===o)return y(m);if("music"===i&&"album"===o){var v=n(t,d);return s(v.trackId||v.id)}return{}}(String(e)):((s={})[t]=e,s);return Promise.resolve(i("lookup",r({},v,b)))}catch(t){return Promise.reject(t)}},exports.search=function(t,e){void 0===e&&(e={});try{var o=r({},y,e);return Promise.resolve(i("search",r({},o,{explicit:o.explicit?"Yes":"No",term:t})))}catch(t){return Promise.reject(t)}};
//# sourceMappingURL=index.js.map
