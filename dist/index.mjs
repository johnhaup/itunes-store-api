function t(){t=function(t,e){return new c(t,void 0,e)};var e=RegExp.prototype,n=new WeakMap;function c(t,e,r){var i=new RegExp(t,e);return n.set(i,r||n.get(t)),o(i,c.prototype)}function i(t,e){var r=n.get(e);return Object.keys(r).reduce(function(e,o){return e[o]=t[r[o]],e},Object.create(null))}return r(c,RegExp),c.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=i(r,this)),r},c.prototype[Symbol.replace]=function(t,r){if("string"==typeof r){var o=n.get(this);return e[Symbol.replace].call(this,t,r.replace(/\$<([^>]+)>/g,function(t,e){return"$"+o[e]}))}if("function"==typeof r){var c=this;return e[Symbol.replace].call(this,t,function(){var t=arguments;return"object"!=typeof t[t.length-1]&&(t=[].slice.call(t)).push(i(t,c)),r.apply(this,t)})}return e[Symbol.replace].call(this,t,r)},t.apply(this,arguments)}function e(){return e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},e.apply(this,arguments)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function n(t){return encodeURIComponent(t).replace(/%20/g,"+")}function c(t,e){var r;const{groups:o}=null!=(r=t.match(e))?r:{};return null!=o?o:{}}const i=/*#__PURE__*/t(/^https?:\/\/((?:apps|books|music|podcasts|))\.apple\.com\/([a-z]+)\/([\x2Da-z]+)/,{media:1,country:2,entity:3}),s=/*#__PURE__*/t(/^https?:\/\/apps\.apple\.com\/(?:(?!\/)[\s\S])*\/app\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),u=/*#__PURE__*/t(/^https?:\/\/music\.apple\.com\/(?:(?!\/)[\s\S])*\/artist\/(?:(?!\/)[\s\S])*\/([0-9]+)/,{id:1}),p=/*#__PURE__*/t(/^https?:\/\/books\.apple\.com\/(?:(?!\/)[\s\S])*\/audiobook\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),a=/*#__PURE__*/t(/^https?:\/\/books\.apple\.com\/(?:(?!\/)[\s\S])*\/author\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),l=/*#__PURE__*/t(/^https?:\/\/books\.apple\.com\/(?:(?!\/)[\s\S])*\/book\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),f=/*#__PURE__*/t(/^https?:\/\/music\.apple\.com\/(?:(?!\/)[\s\S])*\/music\x2Dvideo\/(?:(?!\/)[\s\S])*\/([0-9]+)/,{id:1}),h=/*#__PURE__*/t(/^https?:\/\/podcasts\.apple\.com\/(?:(?!\/)[\s\S])*\/podcast\/(?:(?!\/)[\s\S])*\/id([0-9]+)/,{id:1}),m=/*#__PURE__*/t(/^https?:\/\/music\.apple\.com\/(?:(?!\/)[\s\S])*\/album\/(?:(?!\/)[\s\S])*\/([0-9]+)(?:\?.*i=([0-9]+))?/,{id:1,trackId:2}),d={country:"us"};async function y(t,e){const r=new URLSearchParams;for(const[t,o]of Object.entries(e))r.set(t,n(o));try{const e=await fetch(`https://itunes.apple.com/${t}?${r.toString()}`);if(e.ok)return await e.json();throw new Error(e.statusText)}catch(t){return Promise.reject(t)}}async function b(t,r={}){const o=e({},d,r);return await y("search",e({},o,{explicit:o.explicit?"Yes":"No",term:t}))}async function S(t,r,o={}){const n=e({},d,o),b="url"===t?function(t){const{country:e,entity:r,media:o}=c(t,i);function n(t){return t?{country:e,id:Number(t)}:{}}function d(e){const{id:r}=c(t,e);return n(r)}if("apps"===o)return d(s);if("books"===o&&"audiobook"===r)return d(p);if("books"===o&&"author"===r)return d(a);if("books"===o&&"book"===r)return d(l);if("music"===o&&"artist"===r)return d(u);if("music"===o&&"music-video"===r)return d(f);if("podcasts"===o&&"podcast"===r)return d(h);if("music"===o&&"album"===r){const{id:e,trackId:r}=c(t,m);return n(r||e)}return{}}(String(r)):{[t]:r};return await y("lookup",e({},n,b))}export{S as lookup,b as search};
//# sourceMappingURL=index.mjs.map
